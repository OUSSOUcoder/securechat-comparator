<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulation: Attaques Terminaux (Endpoint)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }
        .blink {
            animation: blink 1s ease-in-out infinite;
        }
        @keyframes slideDown {
            from { transform: translateY(-100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .slide-down {
            animation: slideDown 0.5s ease-out;
        }
    </style>
</head>
<body>
    <div id="app"></div>

    <script>
        let scenario = null; // 'pegasus', 'malware', 'physical'
        let phase = 'intro'; // 'intro', 'setup', 'e2ee-working', 'attack', 'compromised', 'result'
        let messages = [];
        let attackMethod = null;

        const scenarios = {
            pegasus: {
                name: 'Pegasus (NSO Group)',
                icon: 'ü¶†',
                color: 'red',
                description: 'Spyware sophistiqu√© utilis√© par les √âtats-nations',
                vector: 'Zero-click exploit (pas de clic requis)',
                capabilities: [
                    'Acc√®s complet au syst√®me',
                    'Capture messages avant chiffrement',
                    'Enregistrement clavier (keylogger)',
                    'Activation micro/cam√©ra √† distance',
                    'G√©olocalisation en temps r√©el',
                    'Exfiltration de toutes les donn√©es'
                ],
                victims: 'Journalistes, activistes, politiciens (50,000+ cibles)',
                cost: '~500,000$ par cible'
            },
            malware: {
                name: 'Malware Traditionnel',
                icon: 'üêõ',
                color: 'orange',
                description: 'Logiciels malveillants classiques',
                vector: 'Phishing, apps malveillantes, sites compromis',
                capabilities: [
                    'Screenshots p√©riodiques',
                    'Keylogger (capture frappe)',
                    'Vol de fichiers',
                    'Backdoor pour acc√®s futur',
                    'Capture donn√©es avant E2EE',
                    'Enregistrement audio/vid√©o'
                ],
                victims: 'Grand public, ciblage opportuniste',
                cost: 'Gratuit √† quelques centaines de dollars'
            },
            physical: {
                name: 'Acc√®s Physique',
                icon: 'üì±',
                color: 'purple',
                description: 'Vol ou saisie de l\'appareil d√©verrouill√©',
                vector: 'Vol, saisie polici√®re, acc√®s temporaire',
                capabilities: [
                    'Lecture directe de tous les messages',
                    'Export de l\'historique complet',
                    'Extraction base de donn√©es',
                    'Installation de spyware',
                    'Copie des cl√©s de chiffrement',
                    'Acc√®s aux backups locaux'
                ],
                victims: 'Toute personne avec appareil non s√©curis√©',
                cost: 'Gratuit (opportuniste)'
            }
        };

        function selectScenario(type) {
            scenario = type;
            phase = 'setup';
            messages = [];
            render();
        }

        function startMessaging() {
            phase = 'e2ee-working';
            // Ajouter quelques messages
            for (let i = 1; i <= 3; i++) {
                messages.push({
                    id: i,
                    text: `Message confidentiel #${i}`,
                    content: `Contenu sensible du message ${i}`,
                    encrypted: true,
                    timestamp: new Date().toLocaleTimeString('fr-FR')
                });
            }
            render();
        }

        function launchAttack() {
            phase = 'attack';
            render();
            
            setTimeout(() => {
                phase = 'compromised';
                render();
            }, 3000);
        }

        function showResult() {
            phase = 'result';
            render();
        }

        function reset() {
            scenario = null;
            phase = 'intro';
            messages = [];
            attackMethod = null;
            render();
        }

        function render() {
            const app = document.getElementById('app');
            const currentScenario = scenarios[scenario];

            app.innerHTML = `
                <div class="min-h-screen bg-gradient-to-br from-black via-red-900 to-black p-8">
                    <div class="max-w-6xl mx-auto">
                        <!-- Header -->
                        <div class="text-center mb-8">
                            <h1 class="text-5xl font-bold text-white mb-2 flex items-center justify-center gap-3">
                                üíÄ Attaques sur les Terminaux (Endpoint)
                            </h1>
                            <p class="text-xl text-gray-300">
                                Le maillon faible : m√™me le meilleur E2EE ne prot√®ge pas contre √ßa
                            </p>
                        </div>

                        ${phase === 'intro' ? `
                            <!-- Warning Banner -->
                            <div class="bg-red-500/30 backdrop-blur-lg rounded-2xl p-8 border-4 border-red-500 mb-8">
                                <div class="text-center">
                                    <div class="text-8xl mb-4">‚ö†Ô∏è</div>
                                    <h2 class="text-4xl font-bold text-white mb-4">
                                        Le Paradoxe du E2EE
                                    </h2>
                                    <p class="text-2xl text-gray-200 mb-6">
                                        Signal, WhatsApp, Telegram : tous vuln√©rables si l'appareil est compromis
                                    </p>
                                    <div class="bg-black/40 rounded-xl p-6 max-w-3xl mx-auto">
                                        <p class="text-white text-lg italic mb-3">
                                            "Le E2EE prot√®ge les messages en transit, mais si quelqu'un contr√¥le 
                                            votre t√©l√©phone, il peut lire les messages AVANT qu'ils soient chiffr√©s 
                                            ou APR√àS qu'ils soient d√©chiffr√©s."
                                        </p>
                                        <p class="text-gray-400">
                                            - Principe fondamental de la s√©curit√© endpoint
                                        </p>
                                    </div>
                                </div>
                            </div>

                            <!-- Scenario Selection -->
                            <h2 class="text-3xl font-bold text-white mb-6 text-center">
                                Choisissez un Type d'Attaque
                            </h2>
                            <div class="grid grid-cols-3 gap-6">
                                ${Object.entries(scenarios).map(([key, s]) => `
                                    <button onclick="selectScenario('${key}')" 
                                            class="bg-${s.color}-500/20 backdrop-blur-lg rounded-2xl p-6 border-4 border-${s.color}-500 hover:border-${s.color}-400 transition-all hover:scale-105">
                                        <div class="text-7xl mb-4">${s.icon}</div>
                                        <h3 class="text-2xl font-bold text-white mb-3">${s.name}</h3>
                                        <p class="text-gray-200 text-sm mb-4">${s.description}</p>
                                        <div class="bg-${s.color}-500/30 rounded-lg p-3 mb-3">
                                            <p class="text-white font-bold text-xs mb-1">Vecteur d'attaque:</p>
                                            <p class="text-gray-200 text-xs">${s.vector}</p>
                                        </div>
                                        <div class="bg-black/30 rounded-lg p-3">
                                            <p class="text-white font-bold text-xs mb-1">Cibles:</p>
                                            <p class="text-gray-300 text-xs">${s.victims}</p>
                                        </div>
                                    </button>
                                `).join('')}
                            </div>

                            <!-- Info Box -->
                            <div class="mt-8 bg-yellow-500/20 border-2 border-yellow-500 rounded-xl p-6">
                                <div class="flex items-start gap-4">
                                    <span class="text-4xl">üí°</span>
                                    <div>
                                        <h3 class="text-yellow-300 font-bold text-xl mb-2">
                                            Pourquoi c'est Important ?
                                        </h3>
                                        <p class="text-white mb-3">
                                            Les attaques sur les terminaux (endpoints) sont le <strong>maillon le plus faible</strong> 
                                            de la cha√Æne de s√©curit√©. Aucun chiffrement E2EE, aussi parfait soit-il, ne peut 
                                            prot√©ger contre un appareil compromis.
                                        </p>
                                        <p class="text-gray-300 text-sm">
                                            C'est pourquoi m√™me les utilisateurs de Signal peuvent √™tre espionn√©s si leur t√©l√©phone 
                                            est infect√© par Pegasus ou un autre malware avanc√©.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        ` : ''}

                        ${phase === 'setup' && currentScenario ? `
                            <div class="space-y-6">
                                <!-- Scenario Header -->
                                <div class="bg-${currentScenario.color}-500/20 backdrop-blur-lg rounded-2xl p-8 border-4 border-${currentScenario.color}-500">
                                    <div class="flex items-start gap-6">
                                        <div class="text-8xl">${currentScenario.icon}</div>
                                        <div class="flex-1">
                                            <h2 class="text-4xl font-bold text-white mb-3">${currentScenario.name}</h2>
                                            <p class="text-xl text-gray-200 mb-4">${currentScenario.description}</p>
                                            
                                            <div class="grid grid-cols-2 gap-4 mb-4">
                                                <div class="bg-white/10 rounded-lg p-4">
                                                    <p class="text-white font-bold mb-1">Projet Pegasus (2021)</p>
                                                    <p class="text-sm text-gray-300">
                                                        50,000+ num√©ros cibl√©s dont journalistes, activistes, avocats. 
                                                        Pegasus contourne compl√®tement l'E2EE de WhatsApp et Signal en infectant l'appareil.
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="bg-orange-500/20 rounded-lg p-4 border border-orange-500/50">
                                            <div class="flex items-start gap-3">
                                                <span class="text-3xl">üì±</span>
                                                <div>
                                                    <p class="text-white font-bold mb-1">Jamal Khashoggi</p>
                                                    <p class="text-sm text-gray-300">
                                                        Le journaliste utilisait Signal et WhatsApp. Pegasus a √©t√© install√© sur 
                                                        les t√©l√©phones de ses proches, rendant l'E2EE inutile.
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="bg-purple-500/20 rounded-lg p-4 border border-purple-500/50">
                                            <div class="flex items-start gap-3">
                                                <span class="text-3xl">üîì</span>
                                                <div>
                                                    <p class="text-white font-bold mb-1">Jeff Bezos (2018)</p>
                                                    <p class="text-sm text-gray-300">
                                                        T√©l√©phone infect√© via WhatsApp. Malgr√© l'E2EE, l'attaque a cibl√© 
                                                        l'appareil directement avec un fichier vid√©o pi√©g√©.
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Defense Strategies -->
                                <div class="bg-green-500/20 backdrop-blur-lg rounded-xl p-6 border-2 border-green-500">
                                    <h3 class="text-green-300 font-bold text-2xl mb-4">
                                        üõ°Ô∏è Comment se Prot√©ger ? (D√©fense en Profondeur)
                                    </h3>
                                    <div class="grid grid-cols-2 gap-6 text-white">
                                        <div>
                                            <p class="font-bold mb-3 text-yellow-300">üîí S√©curit√© de Base:</p>
                                            <ul class="space-y-2 text-sm">
                                                <li>‚úì Mises √† jour syst√®me imm√©diatement</li>
                                                <li>‚úì Code de verrouillage fort (jamais biom√©trie seule)</li>
                                                <li>‚úì Chiffrement complet de l'appareil</li>
                                                <li>‚úì Apps uniquement de sources officielles</li>
                                                <li>‚úì Ne jamais jailbreak/root (sauf expertise)</li>
                                            </ul>
                                        </div>
                                        <div>
                                            <p class="font-bold mb-3 text-yellow-300">‚ö†Ô∏è Vigilance Avanc√©e:</p>
                                            <ul class="space-y-2 text-sm">
                                                <li>‚úì Red√©marrage quotidien (tue malware temporaire)</li>
                                                <li>‚úì Mode avion pour conversations critiques</li>
                                                <li>‚úì Appareil d√©di√© pour usage sensible</li>
                                                <li>‚úì Surveillance batterie/data/performance</li>
                                                <li>‚úì Pas de clic sur liens/fichiers suspects</li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="mt-4 bg-red-500/30 rounded-lg p-4 border border-red-500">
                                        <p class="text-white text-sm">
                                            <strong>‚ö†Ô∏è Pour cibles √† haut risque:</strong> M√™me ces mesures peuvent √™tre insuffisantes 
                                            face √† un √âtat-nation d√©termin√©. Consid√©rez : appareils d√©di√©s jetables, compartimentalisation 
                                            stricte, consultation experts en s√©curit√©.
                                        </p>
                                    </div>
                                </div>

                                <!-- Comparison Table -->
                                <div class="bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20">
                                    <h3 class="text-2xl font-bold text-white mb-4">üìä R√©capitulatif: Protection par Couche</h3>
                                    <div class="overflow-x-auto">
                                        <table class="w-full text-white text-sm">
                                            <thead>
                                                <tr class="border-b border-white/20">
                                                    <th class="text-left p-3">Type d'Attaque</th>
                                                    <th class="text-center p-3">E2EE Prot√®ge ?</th>
                                                    <th class="text-center p-3">Solution</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr class="border-b border-white/10">
                                                    <td class="p-3">Interception R√©seau</td>
                                                    <td class="text-center text-green-400">‚úÖ OUI</td>
                                                    <td class="text-center text-gray-300">E2EE suffit</td>
                                                </tr>
                                                <tr class="border-b border-white/10">
                                                    <td class="p-3">Serveur Compromis</td>
                                                    <td class="text-center text-green-400">‚úÖ OUI</td>
                                                    <td class="text-center text-gray-300">E2EE suffit</td>
                                                </tr>
                                                <tr class="border-b border-white/10">
                                                    <td class="p-3">Demande L√©gale Serveur</td>
                                                    <td class="text-center text-green-400">‚úÖ OUI (contenu)</td>
                                                    <td class="text-center text-gray-300">E2EE + minimal metadata</td>
                                                </tr>
                                                <tr class="border-b border-white/10">
                                                    <td class="p-3">Malware sur Appareil</td>
                                                    <td class="text-center text-red-400">‚ùå NON</td>
                                                    <td class="text-center text-yellow-300">S√©curit√© endpoint</td>
                                                </tr>
                                                <tr class="border-b border-white/10">
                                                    <td class="p-3">Pegasus / Spyware</td>
                                                    <td class="text-center text-red-400">‚ùå NON</td>
                                                    <td class="text-center text-yellow-300">Vigilance + M√†J</td>
                                                </tr>
                                                <tr>
                                                    <td class="p-3">Acc√®s Physique</td>
                                                    <td class="text-center text-red-400">‚ùå NON</td>
                                                    <td class="text-center text-yellow-300">Verrouillage + Chiffrement</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                <!-- Conclusion -->
                                <div class="bg-indigo-500/20 border border-indigo-500/50 rounded-xl p-6">
                                    <h3 class="text-indigo-300 font-bold text-xl mb-3">üí° Conclusion Importante</h3>
                                    <div class="text-white space-y-3">
                                        <p>
                                            <strong>1. L'E2EE est ESSENTIEL</strong> : Il prot√®ge contre la surveillance de masse, 
                                            l'interception r√©seau, et les serveurs compromis. Signal, WhatsApp, et Telegram 
                                            (Secret Chats) sont tous vuln√©rables aux attaques endpoint.
                                        </p>
                                        <p>
                                            <strong>2. L'E2EE n'est PAS SUFFISANT</strong> : Il ne prot√®ge pas contre les attaques 
                                            qui ciblent directement votre appareil. C'est le "maillon faible" de la cha√Æne.
                                        </p>
                                        <p>
                                            <strong>3. D√©fense en Profondeur</strong> : Combinez E2EE + s√©curit√© de l'appareil + 
                                            vigilance op√©rationnelle + formation continue.
                                        </p>
                                        <p class="text-yellow-300 font-bold">
                                            ‚Üí Signal reste le meilleur choix pour l'E2EE, mais ne n√©gligez JAMAIS la s√©curit√© 
                                            de votre appareil !
                                        </p>
                                    </div>
                                </div>

                                <button onclick="reset()" 
                                        class="w-full px-6 py-4 bg-gray-600 hover:bg-gray-700 text-white font-bold rounded-xl transition-all flex items-center justify-center gap-2">
                                    üîÑ Essayer un Autre Sc√©nario
                                </button>
                            </div>
                        ` : ''}
                    </div>
                </div>
            `;
        }

        window.selectScenario = selectScenario;
        window.startMessaging = startMessaging;
        window.launchAttack = launchAttack;
        window.showResult = showResult;
        window.reset = reset;

        render();
    </script>
</body>
</html>text-${currentScenario.color}-300 font-bold mb-2">üéØ Vecteur:</p>
                                                    <p class="text-white text-sm">${currentScenario.vector}</p>
                                                </div>
                                                <div class="bg-white/10 rounded-lg p-4">
                                                    <p class="text-${currentScenario.color}-300 font-bold mb-2">üí∞ Co√ªt:</p>
                                                    <p class="text-white text-sm">${currentScenario.cost}</p>
                                                </div>
                                            </div>

                                            <div class="bg-black/30 rounded-xl p-4">
                                                <p class="text-white font-bold mb-3">‚ö° Capacit√©s de l'Attaque:</p>
                                                <div class="grid grid-cols-2 gap-2">
                                                    ${currentScenario.capabilities.map(cap => `
                                                        <div class="flex items-center gap-2 text-gray-200 text-sm">
                                                            <span class="text-red-400">‚óè</span>
                                                            <span>${cap}</span>
                                                        </div>
                                                    `).join('')}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Setup Simulation -->
                                <div class="bg-white/10 backdrop-blur-lg rounded-xl p-8 border border-white/20">
                                    <h3 class="text-3xl font-bold text-white mb-6 text-center">
                                        üì± Configuration de la Simulation
                                    </h3>
                                    
                                    <div class="grid grid-cols-3 gap-6 mb-8">
                                        <div class="bg-green-500/20 rounded-xl p-6 border-2 border-green-500 text-center">
                                            <div class="text-5xl mb-3">üîµ</div>
                                            <div class="text-white font-bold mb-2">Signal Install√©</div>
                                            <div class="text-green-300 text-sm">E2EE Actif ‚úì</div>
                                        </div>
                                        <div class="bg-green-500/20 rounded-xl p-6 border-2 border-green-500 text-center">
                                            <div class="text-5xl mb-3">üîí</div>
                                            <div class="text-white font-bold mb-2">Protocole Signal</div>
                                            <div class="text-green-300 text-sm">Perfect Forward Secrecy ‚úì</div>
                                        </div>
                                        <div class="bg-green-500/20 rounded-xl p-6 border-2 border-green-500 text-center">
                                            <div class="text-5xl mb-3">üõ°Ô∏è</div>
                                            <div class="text-white font-bold mb-2">Messages Chiffr√©s</div>
                                            <div class="text-green-300 text-sm">Protection Maximale ‚úì</div>
                                        </div>
                                    </div>

                                    <div class="bg-blue-500/20 border-2 border-blue-500 rounded-xl p-6 mb-6">
                                        <p class="text-white text-center text-lg">
                                            ‚úì Vous utilisez Signal avec E2EE activ√©.<br/>
                                            ‚úì Toutes les bonnes pratiques de s√©curit√© sont appliqu√©es.<br/>
                                            ‚úì Vos communications sont th√©oriquement prot√©g√©es...
                                        </p>
                                    </div>

                                    <button onclick="startMessaging()" 
                                            class="w-full px-8 py-6 bg-blue-600 hover:bg-blue-700 text-white font-bold text-xl rounded-xl transition-all">
                                        üí¨ Commencer √† √âchanger des Messages Sensibles
                                    </button>
                                </div>
                            </div>
                        ` : ''}

                        ${phase === 'e2ee-working' ? `
                            <div class="space-y-6">
                                <!-- E2EE Working -->
                                <div class="bg-green-500/20 backdrop-blur-lg rounded-2xl p-8 border-4 border-green-500">
                                    <div class="text-center mb-6">
                                        <div class="text-8xl mb-4">üîí</div>
                                        <h2 class="text-4xl font-bold text-white mb-2">
                                            E2EE Fonctionne Parfaitement
                                        </h2>
                                        <p class="text-xl text-gray-200">
                                            Vos messages sont chiffr√©s de bout en bout
                                        </p>
                                    </div>

                                    <div class="bg-black/30 rounded-xl p-6 mb-6">
                                        <div class="flex items-center justify-between mb-4">
                                            <div class="text-white font-bold">Protection Active:</div>
                                            <div class="flex gap-3">
                                                <span class="px-4 py-2 bg-green-600 rounded-full text-sm text-white">E2EE ‚úì</span>
                                                <span class="px-4 py-2 bg-green-600 rounded-full text-sm text-white">PFS ‚úì</span>
                                                <span class="px-4 py-2 bg-green-600 rounded-full text-sm text-white">Sealed Sender ‚úì</span>
                                            </div>
                                        </div>
                                        <div class="space-y-3">
                                            ${messages.map(msg => `
                                                <div class="bg-green-500/20 rounded-lg p-4 border border-green-500/50 slide-down">
                                                    <div class="flex items-start gap-3">
                                                        <span class="text-2xl">üîê</span>
                                                        <div class="flex-1">
                                                            <div class="text-white font-bold mb-1">${msg.text}</div>
                                                            <div class="text-sm text-gray-300">${msg.content}</div>
                                                            <div class="text-xs text-gray-500 mt-1">${msg.timestamp}</div>
                                                        </div>
                                                        <div class="px-3 py-1 bg-green-600 rounded-full text-xs text-white">
                                                            CHIFFR√â
                                                        </div>
                                                    </div>
                                                </div>
                                            `).join('')}
                                        </div>
                                    </div>

                                    <div class="grid grid-cols-3 gap-4 mb-6">
                                        <div class="bg-green-600/30 rounded-lg p-4 text-center">
                                            <div class="text-white font-bold mb-1">‚úì Interception R√©seau</div>
                                            <div class="text-sm text-green-300">BLOQU√âE</div>
                                        </div>
                                        <div class="bg-green-600/30 rounded-lg p-4 text-center">
                                            <div class="text-white font-bold mb-1">‚úì Serveur Signal</div>
                                            <div class="text-sm text-green-300">NE PEUT PAS LIRE</div>
                                        </div>
                                        <div class="bg-green-600/30 rounded-lg p-4 text-center">
                                            <div class="text-white font-bold mb-1">‚úì Man-in-the-Middle</div>
                                            <div class="text-sm text-green-300">IMPOSSIBLE</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Attack Warning -->
                                <div class="bg-red-500/20 backdrop-blur-lg rounded-xl p-6 border-2 border-red-500">
                                    <div class="flex items-start gap-4">
                                        <span class="text-5xl blink">‚ö†Ô∏è</span>
                                        <div class="flex-1">
                                            <h3 class="text-red-300 font-bold text-2xl mb-3">
                                                MAIS... Une Menace Approche
                                            </h3>
                                            <p class="text-white mb-4">
                                                Pendant que vous √©changez des messages "s√©curis√©s", une attaque 
                                                <strong>${currentScenario.name}</strong> est en pr√©paration contre votre appareil.
                                            </p>
                                            <p class="text-gray-300 text-sm">
                                                L'E2EE prot√®ge le canal de communication, mais que se passe-t-il si 
                                                l'attaquant cible directement votre t√©l√©phone ?
                                            </p>
                                        </div>
                                    </div>
                                </div>

                                <button onclick="launchAttack()" 
                                        class="w-full px-8 py-6 bg-red-600 hover:bg-red-700 text-white font-bold text-xl rounded-xl transition-all flex items-center justify-center gap-3">
                                    ${currentScenario.icon} Lancer l'Attaque ${currentScenario.name}
                                </button>
                            </div>
                        ` : ''}

                        ${phase === 'attack' ? `
                            <div class="bg-red-500/30 backdrop-blur-lg rounded-2xl p-12 border-4 border-red-500 text-center">
                                <div class="text-9xl mb-6 blink">${currentScenario.icon}</div>
                                <h2 class="text-5xl font-bold text-white mb-4">
                                    Attaque en Cours...
                                </h2>
                                <p class="text-2xl text-gray-200 mb-8">
                                    ${currentScenario.name} infecte votre appareil
                                </p>
                                
                                <div class="max-w-2xl mx-auto space-y-4">
                                    ${currentScenario.capabilities.slice(0, 4).map((cap, idx) => `
                                        <div class="bg-black/40 rounded-lg p-4 text-left flex items-center gap-3 slide-down" style="animation-delay: ${idx * 0.3}s;">
                                            <span class="text-2xl">‚ö°</span>
                                            <div class="text-white">${cap}</div>
                                        </div>
                                    `).join('')}
                                </div>

                                <div class="mt-8">
                                    <div class="w-full bg-gray-700 rounded-full h-4">
                                        <div class="bg-red-500 h-4 rounded-full blink" style="width: 100%"></div>
                                    </div>
                                    <p class="text-gray-400 mt-2">Installation du payload...</p>
                                </div>
                            </div>
                        ` : ''}

                        ${phase === 'compromised' ? `
                            <div class="space-y-6">
                                <!-- Attack Success -->
                                <div class="bg-red-500/30 backdrop-blur-lg rounded-2xl p-8 border-4 border-red-500">
                                    <div class="text-center mb-6">
                                        <div class="text-9xl mb-4">üíÄ</div>
                                        <h2 class="text-5xl font-bold text-red-300 mb-2">
                                            APPAREIL COMPROMIS
                                        </h2>
                                        <p class="text-2xl text-gray-200">
                                            L'E2EE est devenu INUTILE
                                        </p>
                                    </div>

                                    <div class="bg-black/40 rounded-xl p-6 mb-6">
                                        <h3 class="text-red-300 font-bold text-xl mb-4 text-center">
                                            ‚ö° Ce que l'Attaquant Voit Maintenant:
                                        </h3>
                                        <div class="space-y-3">
                                            ${messages.map(msg => `
                                                <div class="bg-red-600/30 rounded-lg p-4 border-2 border-red-500">
                                                    <div class="flex items-start gap-3">
                                                        <span class="text-3xl">üëÅÔ∏è</span>
                                                        <div class="flex-1">
                                                            <div class="text-white font-bold mb-1">‚úó ${msg.text}</div>
                                                            <div class="text-sm text-gray-200">‚úó ${msg.content}</div>
                                                            <div class="text-xs text-gray-400 mt-1">Captur√© √† ${msg.timestamp}</div>
                                                        </div>
                                                        <div class="px-3 py-1 bg-red-600 rounded-full text-xs text-white font-bold">
                                                            EXPOS√â
                                                        </div>
                                                    </div>
                                                </div>
                                            `).join('')}
                                        </div>
                                    </div>

                                    <div class="grid grid-cols-2 gap-4">
                                        ${currentScenario.capabilities.map(cap => `
                                            <div class="bg-red-600/20 rounded-lg p-4 border border-red-500/50">
                                                <div class="flex items-center gap-2">
                                                    <span class="text-xl">‚úó</span>
                                                    <div class="text-white text-sm">${cap}</div>
                                                </div>
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>

                                <!-- Why E2EE Failed -->
                                <div class="bg-yellow-500/20 backdrop-blur-lg rounded-xl p-6 border-2 border-yellow-500">
                                    <h3 class="text-yellow-300 font-bold text-2xl mb-4">
                                        ‚ö†Ô∏è Pourquoi l'E2EE n'a PAS Prot√©g√© ?
                                    </h3>
                                    <div class="space-y-4 text-white">
                                        <div class="flex items-start gap-3">
                                            <span class="text-2xl">1Ô∏è‚É£</span>
                                            <div>
                                                <p class="font-bold mb-1">L'E2EE prot√®ge le CANAL, pas les TERMINAUX</p>
                                                <p class="text-sm text-gray-300">
                                                    Le chiffrement fonctionne pendant la transmission, mais les messages 
                                                    doivent √™tre en clair sur votre t√©l√©phone pour que vous puissiez les lire.
                                                </p>
                                            </div>
                                        </div>
                                        <div class="flex items-start gap-3">
                                            <span class="text-2xl">2Ô∏è‚É£</span>
                                            <div>
                                                <p class="font-bold mb-1">Capture AVANT chiffrement / APR√àS d√©chiffrement</p>
                                                <p class="text-sm text-gray-300">
                                                    ${currentScenario.name} capture vos frappes clavier avant que Signal ne chiffre, 
                                                    ou lit directement l'√©cran apr√®s que Signal ait d√©chiffr√©.
                                                </p>
                                            </div>
                                        </div>
                                        <div class="flex items-start gap-3">
                                            <span class="text-2xl">3Ô∏è‚É£</span>
                                            <div>
                                                <p class="font-bold mb-1">Contr√¥le total de l'appareil</p>
                                                <p class="text-sm text-gray-300">
                                                    L'attaquant a un acc√®s root/syst√®me : il voit TOUT ce que vous faites, 
                                                    peu importe l'application utilis√©e.
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <button onclick="showResult()" 
                                        class="w-full px-8 py-6 bg-blue-600 hover:bg-blue-700 text-white font-bold text-xl rounded-xl transition-all">
                                    üìä Voir l'Analyse Compl√®te
                                </button>
                            </div>
                        ` : ''}

                        ${phase === 'result' ? `
                            <div class="space-y-6">
                                <!-- Summary -->
                                <div class="bg-gradient-to-r from-red-600 to-orange-600 rounded-2xl p-8 border-4 border-red-500">
                                    <h2 class="text-4xl font-bold text-white mb-6 text-center">
                                        üìä Le√ßons de la Simulation
                                    </h2>
                                    
                                    <div class="grid grid-cols-3 gap-6 mb-6">
                                        <div class="bg-black/30 rounded-xl p-6 text-center">
                                            <div class="text-5xl mb-3">üîí</div>
                                            <div class="text-white font-bold mb-2">E2EE Signal</div>
                                            <div class="text-sm text-gray-200">Parfait techniquement</div>
                                        </div>
                                        <div class="text-6xl text-center flex items-center justify-center">
                                            ‚â†
                                        </div>
                                        <div class="bg-black/30 rounded-xl p-6 text-center">
                                            <div class="text-5xl mb-3">üíÄ</div>
                                            <div class="text-white font-bold mb-2">S√©curit√© Totale</div>
                                            <div class="text-sm text-gray-200">Si appareil compromis</div>
                                        </div>
                                    </div>

                                    <div class="bg-red-900/50 rounded-xl p-6">
                                        <p class="text-white text-lg text-center font-bold">
                                            L'E2EE est une composante N√âCESSAIRE mais INSUFFISANTE de la s√©curit√©.
                                            La cha√Æne est aussi forte que son maillon le plus faible : l'appareil.
                                        </p>
                                    </div>
                                </div>

                                <!-- Real World Examples -->
                                <div class="bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20">
                                    <h3 class="text-2xl font-bold text-white mb-4">üåç Exemples R√©els</h3>
                                    <div class="space-y-4">
                                        <div class="bg-red-500/20 rounded-lg p-4 border border-red-500/50">
                                            <div class="flex items-start gap-3">
                                                <span class="text-3xl">ü¶†</span>
                                                <div>
                                                    <p class="text-white font-bold mb-2">Projet Pegasus (2021)</p>
                                                    <p class="text-gray-300 text-sm">
                                                        50,000+ num√©ros cibl√©s par NSO Group. Journalistes (Jamal Khashoggi), 
                                                        activistes, et dirigeants politiques espionn√©s. Leurs communications 
                                                        Signal/WhatsApp n'ont offert AUCUNE protection car les appareils √©taient compromis.
                                                    </p>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="bg-orange-500/20 rounded-lg p-4 border border-orange-500/50">
                                            <div class="flex items-start gap-3">
                                                <span class="text-3xl">üéØ</span>
                                                <div>
                                                    <p class="text-white font-bold mb-2">Dissidents Politiques</p>
                                                    <p class="text-gray-300 text-sm">
                                                        De nombreux activistes utilisant Signal ont √©t√© arr√™t√©s apr√®s que leurs 
                                                        appareils aient √©t√© infect√©s. L'E2EE a prot√©g√© le transit, mais pas 
                                                        contre le malware install√© lors d'une perquisition ou via phishing.
                                                    </p>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="bg-purple-500/20 rounded-lg p-4 border border-purple-500/50">
                                            <div class="flex items-start gap-3">
                                                <span class="text-3xl">üì±</span>
                                                <div>
                                                    <p class="text-white font-bold mb-2">Saisies Polici√®res</p>
                                                    <p class="text-gray-300 text-sm">
                                                        Lors d'arrestations, les t√©l√©phones d√©verrouill√©s sont saisis. 
                                                        Toutes les conversations Signal/WhatsApp sont imm√©diatement accessibles, 
                                                        malgr√© le E2EE parfait utilis√©.
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Defense Strategies -->
                                <div class="bg-blue-500/20 backdrop-blur-lg rounded-xl p-6 border-2 border-blue-500">
                                    <h3 class="text-blue-300 font-bold text-2xl mb-4">
                                        üõ°Ô∏è Comment se Prot√©ger ?
                                    </h3>
                                    <div class="space-y-3 text-white">
                                        <div class="bg-green-600/20 rounded-lg p-4 border border-green-500/50">
                                            <p class="font-bold mb-2">‚úì S√©curit√© de l'Appareil (Priorit√© #1)</p>
                                            <ul class="text-sm text-gray-300 space-y-1 ml-4">
                                                <li>‚Ä¢ Mises √† jour syst√®me imm√©diates (patches zero-days)</li>
                                                <li>‚Ä¢ PIN/mot de passe fort (6+ chiffres, pas biom√©trie seule)</li>
                                                <li>‚Ä¢ √âviter jailbreak/root (augmente surface d'attaque)</li>
                                                <li>‚Ä¢ Chiffrement complet du disque activ√©</li>
                                                <li>‚Ä¢ Verrouillage automatique rapide (30s)</li>
                                            </ul>
                                        </div>

                                        <div class="bg-green-600/20 rounded-lg p-4 border border-green-500/50">
                                            <p class="font-bold mb-2">‚úì Vigilance Constante</p>
                                            <ul class="text-sm text-gray-300 space-y-1 ml-4">
                                                <li>‚Ä¢ Ne jamais cliquer sur liens suspects (phishing)</li>
                                                <li>‚Ä¢ Applications uniquement depuis stores officiels</li>
                                                <li>‚Ä¢ M√©fiance extr√™me avec pi√®ces jointes</li>
                                                <li>‚Ä¢ V√©rifier permissions applications</li>
                                                <li>‚Ä¢ Ne jamais laisser appareil sans surveillance</li>
                                            </ul>
                                        </div>

                                        <div class="bg-green-600/20 rounded-lg p-4 border border-green-500/50">
                                            <p class="font-bold mb-2">‚úì Pour Cibles Tr√®s Prioritaires</p>
                                            <ul class="text-sm text-gray-300 space-y-1 ml-4">
                                                <li>‚Ä¢ T√©l√©phones s√©par√©s pour communications sensibles</li>
                                                <li>‚Ä¢ Appareils "burner" jetables</li>
                                                <li>‚Ä¢ Environnements s√©curis√©s (Tails OS, machines air-gapped)</li>
                                                <li>‚Ä¢ Consultation experts en s√©curit√©</li>
                                                <li>‚Ä¢ Accepter que face √† un √âtat-nation, protection compl√®te est quasi-impossible</li>
                                            </ul>
                                        </div>

                                        <div class="bg-yellow-600/20 rounded-lg p-4 border border-yellow-500/50">
                                            <p class="font-bold mb-2 text-yellow-300">‚ö†Ô∏è R√©alisme</p>
                                            <p class="text-sm text-gray-300">
                                                Pour 99% des utilisateurs, un appareil √† jour + Signal + bonnes pratiques = 
                                                protection suffisante. Les attaques sophistiqu√©es (Pegasus) co√ªtent des centaines 
                                                de milliers de dollars et ciblent des personnes tr√®s sp√©cifiques. 
                                                <strong>Mais il faut en √™tre conscient.</strong>
                                            </p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Comparison Table -->
                                <div class="bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20">
                                    <h3 class="text-2xl font-bold text-white mb-4 text-center">
                                        üìä R√©sum√©: Protection par Type d'Attaque
                                    </h3>
                                    <div class="overflow-x-auto">
                                        <table class="w-full text-sm">
                                            <thead class="bg-gray-800">
                                                <tr>
                                                    <th class="px-4 py-3 text-left text-white">Type d'Attaque</th>
                                                    <th class="px-4 py-3 text-center text-blue-300">E2EE Signal</th>
                                                    <th class="px-4 py-3 text-center text-green-300">Appareil S√©curis√©</th>
                                                    <th class="px-4 py-3 text-center text-yellow-300">Protection Finale</th>
                                                </tr>
                                            </thead>
                                            <tbody class="divide-y divide-gray-700">
                                                <tr class="bg-gray-900/50">
                                                    <td class="px-4 py-3 text-white">Interception R√©seau (MitM)</td>
                                                    <td class="px-4 py-3 text-center text-green-400 font-bold">‚úì BLOQU√â</td>
                                                    <td class="px-4 py-3 text-center text-gray-400">‚óã N/A</td>
                                                    <td class="px-4 py-3 text-center text-green-400 font-bold">‚úì S√âCURIS√â</td>
                                                </tr>
                                                <tr class="bg-gray-900/30">
                                                    <td class="px-4 py-3 text-white">Compromission Serveur</td>
                                                    <td class="px-4 py-3 text-center text-green-400 font-bold">‚úì BLOQU√â</td>
                                                    <td class="px-4 py-3 text-center text-gray-400">‚óã N/A</td>
                                                    <td class="px-4 py-3 text-center text-green-400 font-bold">‚úì S√âCURIS√â</td>
                                                </tr>
                                                <tr class="bg-gray-900/50">
                                                    <td class="px-4 py-3 text-white">Malware / Pegasus</td>
                                                    <td class="px-4 py-3 text-center text-red-400 font-bold">‚úó INUTILE</td>
                                                    <td class="px-4 py-3 text-center text-orange-400 font-bold">‚ñ≥ AIDE</td>
                                                    <td class="px-4 py-3 text-center text-red-400 font-bold">‚úó COMPROMIS</td>
                                                </tr>
                                                <tr class="bg-gray-900/30">
                                                    <td class="px-4 py-3 text-white">Acc√®s Physique (vol√©/saisi)</td>
                                                    <td class="px-4 py-3 text-center text-red-400 font-bold">‚úó INUTILE</td>
                                                    <td class="px-4 py-3 text-center text-green-400 font-bold">‚úì CRITIQUE</td>
                                                    <td class="px-4 py-3 text-center text-orange-400 font-bold">‚ñ≥ D√âPEND PIN</td>
                                                </tr>
                                                <tr class="bg-gray-900/50">
                                                    <td class="px-4 py-3 text-white">Keylogger</td>
                                                    <td class="px-4 py-3 text-center text-red-400 font-bold">‚úó INUTILE</td>
                                                    <td class="px-4 py-3 text-center text-orange-400 font-bold">‚ñ≥ AIDE</td>
                                                    <td class="px-4 py-3 text-center text-red-400 font-bold">‚úó COMPROMIS</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <p class="text-center text-gray-400 text-xs mt-4">
                                        L√©gende: ‚úì Prot√©g√© | ‚ñ≥ Protection partielle | ‚úó Vuln√©rable | ‚óã Non applicable
                                    </p>
                                </div>

                                <!-- Final Message -->
                                <div class="bg-gradient-to-r from-purple-600 to-blue-600 rounded-2xl p-8 border-4 border-purple-500">
                                    <h3 class="text-3xl font-bold text-white mb-4 text-center">
                                        üí° Message Final
                                    </h3>
                                    <div class="bg-black/30 rounded-xl p-6">
                                        <p class="text-white text-lg mb-4">
                                            <strong>L'E2EE (Signal, WhatsApp) est absolument essentiel</strong> et prot√®ge 
                                            contre la vaste majorit√© des menaces (surveillance masse, hackers opportunistes, 
                                            serveurs compromis).
                                        </p>
                                        <p class="text-gray-200 mb-4">
                                            <strong>MAIS</strong> il ne peut pas prot√©ger contre un appareil compromis. 
                                            C'est le <strong>maillon faible fondamental</strong> de toute s√©curit√©.
                                        </p>
                                        <p class="text-yellow-300 font-bold text-center text-xl">
                                            D√©fense en profondeur = E2EE + S√©curit√© de l'appareil + Vigilance + Pratiques OpSec
                                        </p>
                                    </div>
                                </div>

                                <button onclick="reset()" 
                                        class="w-full px-8 py-6 bg-gray-600 hover:bg-gray-700 text-white font-bold text-xl rounded-xl transition-all">
                                    üîÑ Tester un Autre Sc√©nario
                                </button>
                            </div>
                        ` : ''}
                    </div>
                </div>
            `;
        }

        // Make functions global
        window.selectScenario = selectScenario;
        window.startMessaging = startMessaging;
        window.launchAttack = launchAttack;
        window.showResult = showResult;
        window.reset = reset;

        // Initial render
        render();
    </script>
</body>
</html>